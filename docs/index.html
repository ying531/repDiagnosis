<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Diagnostics for Replication Studies • repDiagnosis</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Diagnostics for Replication Studies">
<meta property="og:description" content="This package provides analysis tools for estimating the effect of observed heterogeneity in replication studies.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">repDiagnosis</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/citation.html">Cite repDiagnosis</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="repdiagnosis">repDiagnosis<a class="anchor" aria-label="anchor" href="#repdiagnosis"></a>
</h1></div>
<p>Repository for R package <code>repDiagnosis</code> and R shiny app for live replication diagnosis tools.</p>
<p><strong>Reference.</strong> Please use the following citation if you use our methods, datasets, or softwares for analyzing replication studies.</p>
<pre><code></code></pre>
<p><strong>Rshiny app.</strong> To quickly get started with our method, we recommend you visit our Rshiny app and play with our preloaded clean datasets. Our Rshiny app is also helpful if you want to quickly diagnose your replication study pairs with easy-to-use features, such as live displaying and visualizing data, specifying your study, automatically checking regression in two studies, etc., or if you want to probe the generalizability of your single study (this function is not in our package and paper).</p>
<p><strong>Dataset collection.</strong> In a sibling Github repository <a href="https://github.com/ying531/awesome-replicability-data" class="external-link">awesome-replicability-data</a>, we collect individual-level data for 11 original-replication study pairs from publicly available sources, and 5 one-sided replication studies. Visit our data collection to explore these datasets and our pre-processed clean versions.</p>
<p><strong>Documentation website.</strong> For more on the package and the Rshiny app, see the associated <a href="">documentation</a> website.</p>
<div class="section level2">
<h2 id="install-r-package-repdiagnosis">Install R Package <code>repDiagnosis</code>
<a class="anchor" aria-label="anchor" href="#install-r-package-repdiagnosis"></a>
</h2>
<ol style="list-style-type: decimal">
<li>Install the <a href="https://github.com/hadley/devtools" class="external-link">devtools</a> package using <code>install.packages("devtools")</code>.</li>
<li>Install the latest development version using <code>devtools::install_github("ying531/repDiagnosis")</code>.</li>
</ol>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>We show how to conduct the diagnosis for the replication study on EMDR and misinformation, which decomposes the discrepancy between original and replication study estimates into several interpretable pieces (for details and cleaned datasets, see Data pair 3 in our dataset collection).</p>
<p><strong>Load datasets.</strong> First, the paired datasets can be directly loaded from the package. Use <code><a href="https://rdrr.io/r/utils/data.html" class="external-link">data()</a></code> to load them as <code>org.dat</code> for original study and <code>rep.dat</code> for replication study. You can also use your own datasets, but make sure their column names are consistent.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"emdr_misinfo"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Specify regression.</strong> In this study, the regression of interest is <code>totalcorrect</code> on the treatment indicator named <code>condition</code>. Specify the regression formula as you do for linear models, and specify the treatment variable name.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">analysis_formula</span> <span class="op">=</span> <span class="st">"totalcorrect ~ condition"</span></span>
<span><span class="va">treatment_name</span> <span class="op">=</span> <span class="st">"condition"</span></span></code></pre></div>
<p><strong>Specify covariates and mediators.</strong> Suppose you are interested in the heterogeneity between two studies captured by covariates <code>age</code> and <code>gender</code>. Also, you wonder whether the mediators <code>postvividness</code> and <code>postemotionality</code> capture any more heterogeneity. Specify these quantities as vectors.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covariates</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"gender"</span><span class="op">)</span></span>
<span><span class="va">mediators</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"postvividness"</span>, <span class="st">"postemotionality"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Specify group IDs for clustered experiments.</strong> This is not needed for this dataset. If you like, you can also specify group IDs as <code>X</code>, which is a redundant variable that indicates the participant ID.</p>
<p><strong>Run the decomposition.</strong> Finally, call our analysis function to run the diagnosis. It returns a summary table and a decomposition plot similar to our paper. By default, it also computes post-selective CIs that are valid at 1-<code>alpha</code> level after adjusting for the publication bias (i.e., only publishing p-values smaller than <code>pub_pvalue_threshold</code> whose default value is <code>0.05</code>).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">=</span> <span class="fu"><a href="reference/run_diagnosis.html">run_diagnosis</a></span><span class="op">(</span></span>
<span>  org_df <span class="op">=</span> <span class="va">org.dat</span>, <span class="co"># data frame for original study</span></span>
<span>  rep_df <span class="op">=</span> <span class="va">rep.dat</span>, <span class="co"># data frame for replication study </span></span>
<span>  analysis_formula <span class="op">=</span> <span class="va">analysis_formula</span>, <span class="co"># regression formula </span></span>
<span>  treatment_name <span class="op">=</span> <span class="va">treatment_name</span>, <span class="co"># column name of treatment indicator</span></span>
<span>  id_name_1 <span class="op">=</span> <span class="st">"X"</span>, <span class="co"># cluster ID for original study</span></span>
<span>  id_name_2 <span class="op">=</span> <span class="st">"X"</span>, <span class="co"># cluster ID for replication study </span></span>
<span>  covariates <span class="op">=</span> <span class="va">covariates</span>, <span class="co"># covariates to balance</span></span>
<span>  mediators <span class="op">=</span> <span class="va">mediators</span>, <span class="co"># mediators to balance</span></span>
<span>  alpha <span class="op">=</span> <span class="fl">0.1</span>, <span class="co"># confidence level for all CIs</span></span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># printing the tables and plots</span></span>
<span>  if_selective <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># conduct the selective inference CIs</span></span>
<span>  pub_pvalue_threshold <span class="op">=</span> <span class="fl">0.05</span> <span class="co"># p-value threshold for publication bias</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>If <code>verbose=TRUE</code>, it displays the following summary table:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>Summary of decomposition <span class="cf">for</span> replication diagnosis<span class="sc">:</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>              Estimate Std. Error     t<span class="sc">-</span>stat     <span class="fu">Pr</span>(<span class="sc">&gt;</span><span class="er">|</span>z<span class="sc">|</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>Original   <span class="sc">-</span><span class="fl">1.04878049</span>  <span class="fl">0.2634718</span> <span class="sc">-</span><span class="fl">3.9806177</span> <span class="fl">6.873641e-05</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>Observed   <span class="sc">-</span><span class="fl">1.13211382</span>  <span class="fl">0.3361254</span> <span class="sc">-</span><span class="fl">3.3681297</span> <span class="fl">7.567998e-04</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>Covariates  <span class="fl">0.08133811</span>  <span class="fl">0.1487237</span>  <span class="fl">0.5469076</span> <span class="fl">5.844422e-01</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>Mediators   <span class="fl">0.07448551</span>  <span class="fl">0.1233981</span>  <span class="fl">0.6036197</span> <span class="fl">5.460965e-01</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>Residual   <span class="sc">-</span><span class="fl">1.28793744</span>  <span class="fl">0.3984015</span> <span class="sc">-</span><span class="fl">3.2327622</span> <span class="fl">1.225996e-03</span></span></code></pre></div>
<p>and the following decomposition plot:</p>
<p><img src="https://raw.githubusercontent.com/ying531/archiv/main/default_plot.png" width="600" height="300"></p>
<p>If <code>if_selective=TRUE</code>, it runs selective inference procedures. It will additionally display the following summary table:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>Summary of post<span class="sc">-</span>selective decomposition <span class="cf">for</span> replication diagnosis<span class="sc">:</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                  low       high    estimate</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>Observed   <span class="sc">-</span><span class="fl">1.6846210</span> <span class="sc">-</span><span class="fl">0.5446210</span> <span class="sc">-</span><span class="fl">1.13462105</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>Covariates <span class="sc">-</span><span class="fl">0.1631354</span>  <span class="fl">0.3268646</span>        <span class="sc">-</span><span class="cn">Inf</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>Mediators  <span class="sc">-</span><span class="fl">0.1334761</span>  <span class="fl">0.2765239</span>  <span class="fl">0.07652393</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>Residual   <span class="sc">-</span><span class="fl">1.9459682</span> <span class="sc">-</span><span class="fl">0.6159682</span> <span class="sc">-</span><span class="fl">1.28596819</span></span></code></pre></div>
<p>and the following decomposition plot that adjusts for publication bias:</p>
<p><img src="https://raw.githubusercontent.com/ying531/archiv/main/default_plot_selective.png" width="600" height="300"></p>
<p>This plot does not differ much from the first because the original p-value is tiny, hence adjusting for publication bias does not change things too much.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing repDiagnosis</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Ying Jin <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5211-5083" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Kevin Guo <br><small class="roles"> Author </small>  </li>
<li>Dominik Rothenhäusler <br><small class="roles"> Author </small>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Ying Jin, Kevin Guo, Dominik Rothenhäusler.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
